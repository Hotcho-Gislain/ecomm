<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>African Delicacies - Authentic African Cuisine Delivered</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="African food, African cuisine, delivery, authentic dishes" name="keywords">
    <meta content="Order authentic African delicacies delivered fresh to your door" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Nunito:wght@300;400;600;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/style.css" rel="stylesheet">
    
    <!-- African Delicacies Theme -->
    <link href="css/african-delicacies.css" rel="stylesheet">
</head>

<body>
    <!-- Topbar Start -->
    <div class="container-fluid topbar-custom">
        <div class="row py-2 px-xl-5">
            <div class="col-lg-6 d-none d-lg-block">
                <div class="d-inline-flex align-items-center">
                    <span><i class="fas fa-clock mr-2"></i>Open: 10AM - 10PM</span>
                    <span class="px-3">|</span>
                    <span><i class="fas fa-phone-alt mr-2"></i>+237 651 631 348</span>
                </div>
            </div>
            <div class="col-lg-6 text-center text-lg-right">
                <div class="d-inline-flex align-items-center">
                    <span class="mr-3"><i class="fas fa-truck mr-2"></i>Free delivery on orders over $30</span>
                    <a class="px-2" href=""><i class="fab fa-facebook-f"></i></a>
                    <a class="px-2" href=""><i class="fab fa-instagram"></i></a>
                    <a class="pl-2" href=""><i class="fab fa-whatsapp"></i></a>
                </div>
            </div>
        </div>
    </div>
    <div class="container-fluid bg-white">
        <div class="row align-items-center py-3 px-xl-5">
            <div class="col-lg-3 d-none d-lg-block">
                <a href="index.html" class="text-decoration-none">
                    <div class="d-flex align-items-center">
                        <span style="font-size: 2.5rem;">üç≤</span>
                        <div class="ml-2">
                            <h1 class="m-0 brand-text" style="font-size: 1.6rem; line-height: 1.1;">African<br><span style="color: #C45C26;">Delicacies</span></h1>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-lg-6 col-6 text-left">
                <form action="shop.html" method="GET">
                    <div class="input-group">
                        <input type="text" name="search" class="form-control" placeholder="Search for dishes... (Jollof, Fufu, Suya...)">
                        <div class="input-group-append">
                            <button class="input-group-text bg-primary text-white border-0" type="submit">
                                <i class="fa fa-search"></i>
                            </button>
                        </div>
                    </div>
                </form>
            </div>
            <div class="col-lg-3 col-6 text-right">
                <a href="cart.html" class="btn border position-relative">
                    <i class="fas fa-shopping-basket text-primary" style="font-size: 1.3rem;"></i>
                    <span class="badge bg-primary text-white position-absolute" style="top: -5px; right: -5px;">0</span>
                </a>
            </div>
        </div>
    </div>
    <!-- Topbar End -->


    <!-- Navbar Start -->
    <div class="container-fluid mb-5">
        <div class="row border-top px-xl-5">
            <div class="col-lg-3 d-none d-lg-block">
                <a class="btn shadow-none d-flex align-items-center justify-content-between bg-primary text-white w-100" data-toggle="collapse" href="#navbar-vertical" style="height: 65px; margin-top: -1px; padding: 0 30px;">
                    <h6 class="m-0"><i class="fas fa-utensils mr-2"></i>Menu</h6>
                    <i class="fa fa-angle-down text-white"></i>
                </a>
                <nav class="collapse show navbar navbar-vertical navbar-light align-items-start p-0 border border-top-0 border-bottom-0 bg-white" id="navbar-vertical">
                    <div class="navbar-nav w-100 overflow-hidden" style="height: 410px">
                        <a href="shop.html?category=main" class="nav-item nav-link"><i class="fas fa-drumstick-bite mr-2 text-primary"></i>Main Dishes</a>
                        <a href="shop.html?category=soups" class="nav-item nav-link"><i class="fas fa-bowl-hot mr-2 text-primary"></i>Soups & Stews</a>
                        <a href="shop.html?category=grills" class="nav-item nav-link"><i class="fas fa-fire mr-2 text-primary"></i>Grilled & BBQ</a>
                        <a href="shop.html?category=sides" class="nav-item nav-link"><i class="fas fa-leaf mr-2 text-primary"></i>Sides & Swallows</a>
                        <a href="shop.html?category=drinks" class="nav-item nav-link"><i class="fas fa-glass-whiskey mr-2 text-primary"></i>Drinks</a>
                        <a href="shop.html?category=desserts" class="nav-item nav-link"><i class="fas fa-cookie mr-2 text-primary"></i>Desserts</a>
                        <a href="shop.html?category=breakfast" class="nav-item nav-link"><i class="fas fa-egg mr-2 text-primary"></i>Breakfast</a>
                        <a href="shop.html?category=specials" class="nav-item nav-link"><i class="fas fa-star mr-2 text-primary"></i>Chef's Specials</a>
                    </div>
                </nav>
            </div>
            <div class="col-lg-9">
                <nav class="navbar navbar-expand-lg bg-light navbar-light py-3 py-lg-0 px-0">
                    <a href="index.html" class="text-decoration-none d-block d-lg-none">
                        <span style="font-size: 1.8rem;">üç≤</span>
                        <span class="brand-text">African <span style="color: #C45C26;">Delicacies</span></span>
                    </a>
                    <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse justify-content-between" id="navbarCollapse">
                        <div class="navbar-nav mr-auto py-0">
                            <a href="index.html" class="nav-item nav-link active">Home</a>
                            <a href="shop.html" class="nav-item nav-link">Menu</a>
                            <a href="cart.html" class="nav-item nav-link">My Order</a>
                            <a href="contact.html" class="nav-item nav-link">Contact</a>
                        </div>
                        <div class="navbar-nav ml-auto py-0">
                            <a href="admin.html" class="nav-item nav-link"><i class="fas fa-user-shield mr-1"></i>Admin</a>
                        </div>
                    </div>
                </nav>
                <div id="header-carousel" class="carousel slide" data-ride="carousel" style="border-radius: 0 0 20px 20px; overflow: hidden;">
                    <div class="carousel-inner">
                        <div class="carousel-item active" style="height: 410px; background: linear-gradient(135deg, #5D4037, #C45C26);">
                            <img class="img-fluid" src="img/carousel-1.jpg" alt="African Cuisine" style="opacity: 0.4; object-fit: cover; width: 100%; height: 100%;">
                            <div class="carousel-caption d-flex flex-column align-items-center justify-content-center">
                                <div class="p-4" style="max-width: 700px; background: rgba(44, 24, 16, 0.85); border-radius: 20px; border: 2px solid #D4A853;">
                                    <h4 class="text-warning text-uppercase font-weight-medium mb-3">üå∂Ô∏è Authentic African Cuisine</h4>
                                    <h3 class="display-4 text-white font-weight-semi-bold mb-4" style="font-family: 'Playfair Display', serif;">Taste of Africa</h3>
                                    <p class="text-light mb-4">Fresh ingredients, traditional recipes, delivered to your door</p>
                                    <a href="shop.html" class="btn btn-primary py-2 px-4" style="border-radius: 25px;">Order Now <i class="fas fa-arrow-right ml-2"></i></a>
                                </div>
                            </div>
                        </div>
                        <div class="carousel-item" style="height: 410px; background: linear-gradient(135deg, #8B3A1D, #D4A853);">
                            <img class="img-fluid" src="img/carousel-2.jpg" alt="Jollof Rice" style="opacity: 0.4; object-fit: cover; width: 100%; height: 100%;">
                            <div class="carousel-caption d-flex flex-column align-items-center justify-content-center">
                                <div class="p-4" style="max-width: 700px; background: rgba(44, 24, 16, 0.85); border-radius: 20px; border: 2px solid #D4A853;">
                                    <h4 class="text-warning text-uppercase font-weight-medium mb-3">üçö Today's Special</h4>
                                    <h3 class="display-4 text-white font-weight-semi-bold mb-4" style="font-family: 'Playfair Display', serif;">Jollof Rice Feast</h3>
                                    <p class="text-light mb-4">The famous West African dish with your choice of protein</p>
                                    <a href="shop.html" class="btn btn-primary py-2 px-4" style="border-radius: 25px;">View Menu <i class="fas fa-utensils ml-2"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <a class="carousel-control-prev" href="#header-carousel" data-slide="prev">
                        <div class="btn btn-primary" style="width: 45px; height: 45px; border-radius: 50%;">
                            <span class="carousel-control-prev-icon mb-n2"></span>
                        </div>
                    </a>
                    <a class="carousel-control-next" href="#header-carousel" data-slide="next">
                        <div class="btn btn-primary" style="width: 45px; height: 45px; border-radius: 50%;">
                            <span class="carousel-control-next-icon mb-n2"></span>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <!-- Navbar End -->


    <!-- Featured Start -->
    <div class="container-fluid pt-5">
        <div class="row px-xl-5 pb-3">
            <div class="col-lg-3 col-md-6 col-sm-12 pb-1">
                <div class="d-flex align-items-center border mb-4" style="padding: 30px; border-radius: 15px; background: linear-gradient(135deg, #fff, #F5E6D3);">
                    <h1 class="fas fa-leaf text-primary m-0 mr-3"></h1>
                    <h5 class="font-weight-semi-bold m-0">Fresh Ingredients</h5>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-12 pb-1">
                <div class="d-flex align-items-center border mb-4" style="padding: 30px; border-radius: 15px; background: linear-gradient(135deg, #fff, #F5E6D3);">
                    <h1 class="fa fa-truck text-primary m-0 mr-2"></h1>
                    <h5 class="font-weight-semi-bold m-0">Fast Delivery</h5>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-12 pb-1">
                <div class="d-flex align-items-center border mb-4" style="padding: 30px; border-radius: 15px; background: linear-gradient(135deg, #fff, #F5E6D3);">
                    <h1 class="fas fa-fire text-primary m-0 mr-3"></h1>
                    <h5 class="font-weight-semi-bold m-0">Hot & Fresh</h5>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-12 pb-1">
                <div class="d-flex align-items-center border mb-4" style="padding: 30px; border-radius: 15px; background: linear-gradient(135deg, #fff, #F5E6D3);">
                    <h1 class="fa fa-heart text-primary m-0 mr-3"></h1>
                    <h5 class="font-weight-semi-bold m-0">Made with Love</h5>
                </div>
            </div>
        </div>
    </div>
    <!-- Featured End -->


    <!-- Why Choose Us Start -->
    <div class="container-fluid py-5" style="background: linear-gradient(135deg, #5D4037, #C45C26);">
        <div class="row px-xl-5">
            <div class="col-12 text-center mb-4">
                <h2 class="text-white" style="font-family: 'Playfair Display', serif;">Why Choose African Delicacies?</h2>
                <p class="text-light">Experience the rich flavors of Africa, delivered to your doorstep</p>
            </div>
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="text-center p-4" style="background: rgba(255,255,255,0.1); border-radius: 20px;">
                    <span style="font-size: 3rem;">üç≤</span>
                    <h5 class="text-white mt-3">Authentic Recipes</h5>
                    <p class="text-light mb-0">Traditional recipes passed down through generations</p>
                </div>
            </div>
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="text-center p-4" style="background: rgba(255,255,255,0.1); border-radius: 20px;">
                    <span style="font-size: 3rem;">üå∂Ô∏è</span>
                    <h5 class="text-white mt-3">Premium Spices</h5>
                    <p class="text-light mb-0">Imported African spices for that genuine taste</p>
                </div>
            </div>
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="text-center p-4" style="background: rgba(255,255,255,0.1); border-radius: 20px;">
                    <span style="font-size: 3rem;">‚è∞</span>
                    <h5 class="text-white mt-3">30-Min Delivery</h5>
                    <p class="text-light mb-0">Hot food at your door in 30 minutes or less</p>
                </div>
            </div>
        </div>
    </div>
    <!-- Why Choose Us End -->


    <!-- Offer Start -->
    <div class="container-fluid offer pt-5">
        <div class="row px-xl-5">
            <div class="col-md-6 pb-4">
                <div class="position-relative bg-secondary text-center text-md-right text-white mb-2 py-5 px-5">
                    <img src="img/offer-1.png" alt="">
                    <div class="position-relative" style="z-index: 1;">
                        <h5 class="text-uppercase text-primary mb-3">20% off the all order</h5>
                        <h1 class="mb-4 font-weight-semi-bold">Spring Collection</h1>
                        <a href="" class="btn btn-outline-primary py-md-2 px-md-3">Shop Now</a>
                    </div>
                </div>
            </div>
            <div class="col-md-6 pb-4">
                <div class="position-relative bg-secondary text-center text-md-left text-white mb-2 py-5 px-5">
                    <img src="img/offer-2.png" alt="">
                    <div class="position-relative" style="z-index: 1;">
                        <h5 class="text-uppercase text-primary mb-3">20% off the all order</h5>
                        <h1 class="mb-4 font-weight-semi-bold">Winter Collection</h1>
                        <a href="" class="btn btn-outline-primary py-md-2 px-md-3">Shop Now</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Offer End -->


    <!-- Popular Dishes Start -->
    <div class="container-fluid pt-5">
        <div class="text-center mb-4">
            <h2 class="section-title px-5"><span class="px-2">üî• Popular Dishes</span></h2>
            <p class="text-muted">Our customers' favorites</p>
        </div>
        <div class="row px-xl-5 pb-3" id="trendy-products">
            <!-- Dishes loaded dynamically from Firebase -->
            <div class="col-12 text-center py-5 loading-placeholder">
                <div class="spinner-border text-primary" role="status"></div>
                <p class="mt-3">Loading menu...</p>
            </div>
        </div>
    </div>
    <!-- Popular Dishes End -->


    <!-- Subscribe Start -->
    <div class="container-fluid my-5" style="background: linear-gradient(135deg, #D4A853, #C45C26);">
        <div class="row justify-content-md-center py-5 px-xl-5">
            <div class="col-md-6 col-12 py-5">
                <div class="text-center mb-2 pb-2">
                    <h2 class="text-white mb-3" style="font-family: 'Playfair Display', serif;">üçΩÔ∏è Get Special Offers</h2>
                    <p class="text-white">Subscribe to receive exclusive deals, new menu items, and African culinary tips!</p>
                </div>
                <form action="">
                    <div class="input-group">
                        <input type="email" class="form-control border-0 p-4" placeholder="Enter your email" style="border-radius: 25px 0 0 25px;">
                        <div class="input-group-append">
                            <button class="btn btn-dark px-4" style="border-radius: 0 25px 25px 0;">Subscribe</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- Subscribe End -->


    <!-- New on Menu Start -->
    <div class="container-fluid pt-5">
        <div class="text-center mb-4">
            <h2 class="section-title px-5"><span class="px-2">‚ú® New on Menu</span></h2>
            <p class="text-muted">Fresh additions to our kitchen</p>
        </div>
        <div class="row px-xl-5 pb-3" id="just-arrived">
            <!-- Dishes loaded dynamically from Firebase -->
            <div class="col-12 text-center py-5 loading-placeholder">
                <div class="spinner-border text-primary" role="status"></div>
                <p class="mt-3">Loading menu...</p>
            </div>
        </div>
    </div>
    <!-- New on Menu End -->


    <!-- Footer Start -->
    <div class="container-fluid footer-custom mt-5 pt-5" style="background: linear-gradient(135deg, #5D4037, #8B3A1D);">
        <div class="row px-xl-5 pt-5">
            <div class="col-lg-4 col-md-12 mb-5 pr-3 pr-xl-5">
                <a href="index.html" class="text-decoration-none">
                    <div class="d-flex align-items-center mb-4">
                        <span style="font-size: 2.5rem;">üç≤</span>
                        <div class="ml-2">
                            <h2 class="m-0 text-white" style="font-family: 'Playfair Display', serif; font-size: 1.5rem;">African<br><span style="color: #D4A853;">Delicacies</span></h2>
                        </div>
                    </div>
                </a>
                <p class="text-light">Bringing the authentic taste of Africa to your doorstep. Fresh ingredients, traditional recipes, made with love.</p>
                <p class="mb-2 text-light"><i class="fa fa-map-marker-alt mr-3" style="color: #D4A853;"></i>Buea, Cameroon</p>
                <p class="mb-2 text-light"><i class="fa fa-envelope mr-3" style="color: #D4A853;"></i>order@africandelicacies.com</p>
                <p class="mb-0 text-light"><i class="fa fa-phone-alt mr-3" style="color: #D4A853;"></i>+237 651 631 348</p>
            </div>
            <div class="col-lg-8 col-md-12">
                <div class="row">
                    <div class="col-md-4 mb-5">
                        <h5 class="font-weight-bold mb-4" style="color: #D4A853;">Quick Links</h5>
                        <div class="d-flex flex-column justify-content-start">
                            <a class="text-light mb-2" href="index.html"><i class="fa fa-angle-right mr-2"></i>Home</a>
                            <a class="text-light mb-2" href="shop.html"><i class="fa fa-angle-right mr-2"></i>Full Menu</a>
                            <a class="text-light mb-2" href="cart.html"><i class="fa fa-angle-right mr-2"></i>My Order</a>
                            <a class="text-light mb-2" href="checkout.html"><i class="fa fa-angle-right mr-2"></i>Checkout</a>
                            <a class="text-light" href="contact.html"><i class="fa fa-angle-right mr-2"></i>Contact Us</a>
                        </div>
                    </div>
                    <div class="col-md-4 mb-5">
                        <h5 class="font-weight-bold mb-4" style="color: #D4A853;">Menu Categories</h5>
                        <div class="d-flex flex-column justify-content-start">
                            <a class="text-light mb-2" href="shop.html?category=main"><i class="fas fa-drumstick-bite mr-2"></i>Main Dishes</a>
                            <a class="text-light mb-2" href="shop.html?category=soups"><i class="fas fa-bowl-hot mr-2"></i>Soups & Stews</a>
                            <a class="text-light mb-2" href="shop.html?category=grills"><i class="fas fa-fire mr-2"></i>Grilled & BBQ</a>
                            <a class="text-light mb-2" href="shop.html?category=drinks"><i class="fas fa-glass-whiskey mr-2"></i>Drinks</a>
                            <a class="text-light" href="shop.html?category=desserts"><i class="fas fa-cookie mr-2"></i>Desserts</a>
                        </div>
                    </div>
                    <div class="col-md-4 mb-5">
                        <h5 class="font-weight-bold mb-4" style="color: #D4A853;">Opening Hours</h5>
                        <div class="text-light">
                            <p class="mb-2"><i class="far fa-clock mr-2" style="color: #D4A853;"></i><strong>Mon - Fri:</strong> 10AM - 10PM</p>
                            <p class="mb-2"><i class="far fa-clock mr-2" style="color: #D4A853;"></i><strong>Saturday:</strong> 11AM - 11PM</p>
                            <p class="mb-4"><i class="far fa-clock mr-2" style="color: #D4A853;"></i><strong>Sunday:</strong> 12PM - 9PM</p>
                            <p class="mb-2"><strong style="color: #D4A853;">Follow Us:</strong></p>
                            <a class="text-light mr-3" href="#"><i class="fab fa-facebook-f fa-lg"></i></a>
                            <a class="text-light mr-3" href="#"><i class="fab fa-instagram fa-lg"></i></a>
                            <a class="text-light mr-3" href="#"><i class="fab fa-whatsapp fa-lg"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row border-top mx-xl-5 py-4" style="border-color: rgba(255,255,255,0.1) !important;">
            <div class="col-md-6 px-xl-0">
                <p class="mb-md-0 text-center text-md-left text-light">
                    &copy; 2024 <a class="font-weight-semi-bold" href="#" style="color: #D4A853;">African Delicacies</a>. All Rights Reserved.
                </p>
            </div>
            <div class="col-md-6 px-xl-0 text-center text-md-right">
                <img class="img-fluid" src="img/payments.png" alt="">
            </div>
        </div>
    </div>
    <!-- Footer End -->


    <!-- Back to Top -->
    <a href="#" class="btn btn-primary back-to-top"><i class="fa fa-angle-double-up"></i></a>


    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>

    <!-- Contact Javascript File -->
    <script src="mail/jqBootstrapValidation.min.js"></script>
    <script src="mail/contact.js"></script>

    <!-- Template Javascript -->
    <script src="js/main.js"></script>

    <!-- Cart Management Script -->
    <script src="js/cart.js"></script>

    <!-- Firebase SDK for Dynamic Products -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js";
        import { getFirestore, doc, getDoc, collection, getDocs, query, where, orderBy } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-firestore.js";

        // Products cache for cart functionality
        window.productsCache = {};

        const firebaseConfig = {
            apiKey: "AIzaSyCp7byyzg3DCorJHrbAPKl_sVzBGT5vtw0",
            authDomain: "ecommsample-8c169.firebaseapp.com",
            projectId: "ecommsample-8c169",
            storageBucket: "ecommsample-8c169.firebasestorage.app",
            messagingSenderId: "584342335720",
            appId: "1:584342335720:web:5fa4c181406fda7822995d"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Load store settings
        async function loadStoreSettings() {
            try {
                console.log('Loading store settings...');
                const settingsDoc = await getDoc(doc(db, 'settings', 'store'));
                console.log('Settings doc exists:', settingsDoc.exists());
                
                if (settingsDoc.exists()) {
                    const data = settingsDoc.data();
                    console.log('Settings data:', data);
                    
                    // Update carousel images
                    if (data.carousel1) {
                        const carousel1El = document.querySelector('#header-carousel .carousel-item.active img');
                        console.log('Carousel 1 element found:', !!carousel1El);
                        if (carousel1El) carousel1El.src = data.carousel1;
                    }
                    if (data.carousel2) {
                        const carousel2El = document.querySelector('#header-carousel .carousel-item:not(.active) img');
                        console.log('Carousel 2 element found:', !!carousel2El);
                        if (carousel2El) carousel2El.src = data.carousel2;
                    }
                    
                    // Update featured section title
                    if (data.featuredTitle) {
                        const trendyTitle = document.querySelector('.section-title span');
                        console.log('Featured title element found:', !!trendyTitle);
                        if (trendyTitle) trendyTitle.textContent = data.featuredTitle;
                    }
                    
                    // Store currency for use in product rendering
                    window.currencySymbol = data.currencySymbol || '$';
                    console.log('Currency symbol:', window.currencySymbol);
                } else {
                    console.log('No settings document found in Firebase');
                    window.currencySymbol = '$';
                }
            } catch (error) {
                console.error('Error loading settings:', error);
                window.currencySymbol = '$';
            }
        }

        // Load categories for sidebar
        async function loadCategories() {
            try {
                const snapshot = await getDocs(collection(db, 'categories'));
                const categories = [];
                snapshot.forEach(docSnap => {
                    categories.push({ id: docSnap.id, ...docSnap.data() });
                });
                
                // Update sidebar categories if we have them
                if (categories.length > 0) {
                    const navbarVertical = document.querySelector('#navbar-vertical .navbar-nav');
                    if (navbarVertical) {
                        navbarVertical.innerHTML = categories.map(cat => 
                            `<a href="shop.html?category=${cat.id}" class="nav-item nav-link">${cat.name}</a>`
                        ).join('');
                    }
                }
            } catch (error) {
                console.log('Using static categories');
            }
        }

        // Create product card HTML
        function createProductCard(product) {
            const currency = window.currencySymbol || '$';
            return `
                <div class="col-lg-3 col-md-6 col-sm-12 pb-1">
                    <div class="card product-item border-0 mb-4" style="border-radius: 20px; overflow: hidden;">
                        <div class="card-header product-img position-relative overflow-hidden bg-transparent border-0 p-0">
                            <img class="img-fluid w-100" src="${product.image || 'img/product-1.jpg'}" alt="${product.name}" style="height: 200px; object-fit: cover;">
                            ${product.featured ? '<span class="badge bg-warning text-dark position-absolute" style="top: 10px; left: 10px; border-radius: 10px;">üî• Popular</span>' : ''}
                        </div>
                        <div class="card-body border-0 text-center p-3">
                            <h6 class="mb-2" style="font-family: 'Playfair Display', serif; color: #5D4037;">${product.name}</h6>
                            <p class="text-muted small mb-2">${product.description ? product.description.substring(0, 50) + '...' : 'Delicious African dish'}</p>
                            <div class="d-flex justify-content-center align-items-center">
                                <h5 class="mb-0" style="color: #C45C26; font-weight: 700;">${currency}${parseFloat(product.price).toFixed(2)}</h5>
                                ${product.originalPrice ? `<h6 class="text-muted ml-2 mb-0"><del>${currency}${parseFloat(product.originalPrice).toFixed(2)}</del></h6>` : ''}
                            </div>
                        </div>
                        <div class="card-footer d-flex justify-content-between border-0 p-3" style="background: linear-gradient(135deg, #F5E6D3, #fff);">
                            <a href="detail.html?id=${product.id}" class="btn btn-sm text-dark p-0"><i class="fas fa-info-circle text-primary mr-1"></i>Details</a>
                            <a href="#" class="btn btn-sm btn-primary px-3 add-to-cart" data-id="${product.id}" style="border-radius: 20px;"><i class="fas fa-plus mr-1"></i>Add</a>
                        </div>
                    </div>
                </div>
            `;
        }

        // Load featured/trendy products
        async function loadFeaturedProducts() {
            try {
                console.log('Loading products from Firebase...');
                const snapshot = await getDocs(collection(db, 'products'));
                const products = [];
                snapshot.forEach(docSnap => {
                    const data = docSnap.data();
                    console.log('Found product:', data.name, 'Status:', data.status);
                    if (data.status === 'published') {
                        const product = { id: docSnap.id, ...data };
                        products.push(product);
                        // Cache product for cart functionality
                        window.productsCache[docSnap.id] = product;
                    }
                });
                
                console.log('Total published products:', products.length);
                
                if (products.length === 0) {
                    console.log('No published products found in database');
                    return;
                }
                
                // Get featured products or just the first 8
                const featured = products.filter(p => p.featured).slice(0, 8);
                const displayProducts = featured.length >= 4 ? featured : products.slice(0, 8);
                
                // Update "Trendy Products" section using ID
                const trendySection = document.getElementById('trendy-products');
                console.log('Trendy section found:', !!trendySection);
                if (trendySection && displayProducts.length > 0) {
                    trendySection.innerHTML = displayProducts.map(p => createProductCard(p)).join('');
                    console.log('Trendy products rendered:', displayProducts.length);
                }
                
                // Update "Just Arrived" section (newest products)
                const sortedByDate = [...products].sort((a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0));
                const justArrived = sortedByDate.slice(0, 8);
                
                const justArrivedSection = document.getElementById('just-arrived');
                console.log('Just Arrived section found:', !!justArrivedSection);
                if (justArrivedSection && justArrived.length > 0) {
                    justArrivedSection.innerHTML = justArrived.map(p => createProductCard(p)).join('');
                    console.log('Just Arrived products rendered:', justArrived.length);
                }
                
            } catch (error) {
                console.error('Error loading products:', error);
            }
        }

        // Setup add to cart buttons
        function setupCartButtons() {
            document.querySelectorAll('.add-to-cart').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.preventDefault();
                    const productId = btn.getAttribute('data-id');
                    const product = window.productsCache[productId];
                    if (product) {
                        Cart.addItem(product);
                    }
                });
            });
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', async () => {
            console.log('Page loaded, initializing Firebase...');
            await loadStoreSettings();
            await loadCategories();
            await loadFeaturedProducts();
            setupCartButtons();
            console.log('Firebase initialization complete');
        });
    </script>
</body>

</html>